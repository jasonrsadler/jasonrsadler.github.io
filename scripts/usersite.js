/**! @license Third-party licenses available at bandzoogle.com/licenses */
function Mt(e,t,i){return i.indexOf(e)===t}import{b as Lt}from"/scripts/chunks/chunk-KRY5TIRI.digested.js";import{a as Et}from"/scripts/chunks/chunk-RD5WNJFN.digested.js";import{a as kt}from"/scripts/chunks/chunk-4U7Y4FTW.digested.js";import{a as wt,b as _t,c as S,d as Ct}from"/scripts/chunks/chunk-NCI3ZDGC.digested.js";import"/scripts/chunks/chunk-KM74CF2Y.digested.js";import"/scripts/chunks/chunk-H57PQYDG.digested.js";import{a as ht}from"/scripts/chunks/chunk-UD76JUOO.digested.js";import{a as St}from"/scripts/chunks/chunk-NKUGSITO.digested.js";import{a as u,b as Tt}from"/scripts/chunks/chunk-4PD7QEWJ.digested.js";import{a as xt}from"/scripts/chunks/chunk-EPTWJNFA.digested.js";import{a as m}from"/scripts/chunks/chunk-QOBY5R44.digested.js";import"/scripts/chunks/chunk-V4D545R7.digested.js";import"/scripts/chunks/chunk-HQGF43QM.digested.js";import{a as vt,d as yt}from"/scripts/chunks/chunk-OU4GGTV4.digested.js";import"/scripts/chunks/chunk-ZNLAHVL6.digested.js";import{a as pt,b as g,d as ft}from"/scripts/chunks/chunk-S4RFMAMH.digested.js";import{a as _}from"/scripts/chunks/chunk-ED4DOYUA.digested.js";import{a as gt,b as C,c as bt,d as x,h as T,p as b,q as v}from"/scripts/chunks/chunk-TPOPGTYZ.digested.js";import"/scripts/chunks/chunk-OJ4AZH3W.digested.js";import{b as o}from"/scripts/chunks/chunk-YX7F2HNK.digested.js";import"/scripts/chunks/chunk-PLGRBW3W.digested.js";var L=class extends o{connect(){S(),this.registerWithZoogleMedia()}disconnect(){this.unregisterWithZoogleMedia()}registerWithZoogleMedia(){let e=this.element;e.pause=()=>{e.contentWindow.postMessage("pause","https://airbit.com")},window.zoogleMedia.register(e)}handleAirbitPostMessage(e){"https://airbit.com"===e.origin&&"pause"===e.data&&window.zoogleMedia.setActive(this.element)}unregisterWithZoogleMedia(){let e=this.element,t=window.zoogleMedia.players.indexOf(e);window.zoogleMedia.players.remove(t),this.clearCurrentPlayer(e)}clearCurrentPlayer(e){window.zoogleMedia.currentPlayer===e&&(window.zoogleMedia.currentPlayer=void 0)}},E=class extends o{static targets=["list"];connect(){let e=[...document.querySelectorAll("[data-attribution-photographer]")].map((e=>e.dataset));if(this.listTarget.innerHTML="",e.length>0){let t=e.map((e=>this.toLink(e))).filter(Mt).join(" ");this.listTarget.innerHTML=t,this.element.classList.remove("hide")}}toLink(e){let t,{attributionPhotographer:i,attributionPhotographerUrl:s,attributionLicenseUrl:r}=e;return s?t=`<a href="${s} target="_blank" rel="noopener">${i}</a>`:i&&(t=i),r&&(t=`${t} (<a href="${r} target="_blank" rel="noopener">cc</a>)`),t}},k=class extends o{static targets=["addToCartButton"];connect(){this.refresh()}refresh(){if("true"!==this.element.dataset.trackInventory)return;let e=this.element.dataset,t={};if(!e.variations&&!e.inventory)return;let i=JSON.parse(e.variations),s=Array.from(this.element.querySelectorAll(".bundle-item")).some((e=>{let s=e.querySelector("[name$='_option_1_value]']"),r=e.querySelector("[name$='_option_2_value]']"),a=s?s.value:null,o=r?r.value:null,n=parseInt(e.dataset.bundlableId,10),l=`${n}-${a}-${o}`;t[l]?t[l]+=1:t[l]=1;let c=i.find((e=>e[0].store_item_id===n));if(c.every((e=>0===e.inventory)))return!0;let d=c.find((e=>e.value_1===a&&(null===e.value_2||e.value_2===o)));return!(!d||null===d.inventory)&&t[l]>d.inventory}));e.inventory&&JSON.parse(e.inventory).some((e=>!i.some((t=>t[0].store_item_id===e.store_item_id))&&0===e.inventory))&&(s=!0),this.hasAddToCartButtonTarget&&(s?this.addToCartButtonTarget.disabled="disabled":this.element.classList.contains("not-available")||this.addToCartButtonTarget.removeAttribute("disabled")),this.element.classList.toggle("out-of-stock",s),this.element.classList.toggle("in-stock",!s)}handleSubmit(e){return!this.element.classList.contains("out-of-stock")||(e.stopImmediatePropagation(),e.preventDefault(),!1)}},I=class extends o{connect(){this.refreshAll()}refreshAll(){this.element.querySelectorAll(".bundle-item").forEach((e=>{this.doRefresh(e)}))}refresh(e){let t=e.target.closest(".bundle-item");this.doRefresh(t)}doRefresh(e){let t=e.querySelector('select[name$="option_1_value]"'),i=e.querySelector('select[name$="option_2_value]"');if(!i)return;Array.from(t.options).forEach((e=>{e.disabled=!1})),Array.from(i.options).forEach((e=>{e.disabled=!1}));let s=t.value,r=parseInt(t.dataset.storeItemId,10),a=JSON.parse(this.element.dataset.variations).find((e=>e[0].store_item_id===r)),o=[];if(a.forEach((e=>{e.value_1===s&&o.push(e.value_2)})),Array.from(i.options).forEach((e=>{o.includes(e.value)||(e.disabled=!0)})),!0===i.selectedOptions[0].disabled){let e=Array.from(i.options).find((e=>!1===e.disabled));i.selectedIndex=e.index,this.element.dispatchEvent(new CustomEvent("refreshInventoryForm")),this.element.dispatchEvent(new CustomEvent("refreshVariationPrice"))}}},y=class{static get contentWrap(){return document.querySelector("#content-wrap, #container")}},P=class extends o{static targets=["button","tally"];updateTally(e){this.data.set("tally",e),this.element.classList.remove("-empty-on-load"),this.tallyTarget.innerText=e}set itemsInCart(e){this.data.set("itemsInCart",JSON.stringify(e))}get itemsInCart(){return JSON.parse(this.data.get("itemsInCart"))}isItemInCart(e,t){return-1!==this.itemsInCart.findIndex((i=>i.id===e&&i.type===t))}onCartUpdate(e){this.updateTally(e.detail.tally),this.itemsInCart=e.detail.items,this.dispatch("itemsUpdated")}async displayCart(e){e&&e.preventDefault();let{href:t}=this.buttonTarget;return"0"!==this.tallyTarget.innerText&&(t=`${t}?existing_cart=true`),T(t,y.contentWrap,"replaceOrAppend")}},A=class extends o{initialize(){u()||this.injectBadge()}injectBadge(){document.getElementById("cart-badge")||T("/api/cart/badge",y.contentWrap)}},O=class extends m{static musicianId="cart--item";static targets=["discount","total"];connect(){vt(this),super.connect(),this.open=this.data.get("open")}clickOutside(e){e.target.classList.contains("add-to-cart")||(this.open=!1)}get itemControllers(){return this._musicianControllers||[]}set total(e){this.totalTarget.innerHTML=e}set discount(e){this.hasDiscountTarget&&(this.discountTarget.innerHTML=e)}set open(e){document.body.classList.toggle("cart-open",e),this.data.set("open",e)}closeSummary(){this.open=!1}async refresh(){let e={tally:0,items:[]};this.itemControllers.forEach((t=>{e.tally+=t.quantity,e.items.push({id:t.itemId,type:t.itemType})})),this.dispatch("updated",{detail:e})}updateTotal(e){this.total=e.detail.total}},V=class extends m{static conductorId="cart--cart";static targets=["quantity"];connect(){super.connect(),this.cartController.refresh()}disconnect(){super.disconnect(),this.cartController.refresh()}get cartController(){return this._conductorController}get quantity(){return parseInt(this.data.get("quantity"),10)}get itemId(){return parseInt(this.element.dataset.itemId,10)}get itemType(){return this.element.dataset.itemType}updateQuantity(){let{id:e}=this.element.dataset,t=this.element.querySelector("[name='quantity']"),i=parseInt(t.value,10);i>9&&"tel"!==t.type?this.switchQuantityToInput(t,i):fetch(`/api/cart_items/${e}`,{method:"PUT",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-Token":x()},credentials:"same-origin",body:JSON.stringify({cart_item:{quantity:i}})}).then((e=>(this.handleHeaders(e.headers),e.text()))).then((e=>{this.element.replaceWith(C(e)),this.cartController.refresh()}))}switchQuantityToInput(e,t){e.replaceWith(bt(`<input name="quantity" type="tel" value="${t}" autofocus data-action="change->cart--item#updateQuantity">`)),this.updateQuantity()}handleHeaders(e){let t={"X-Cart-Total":"total","X-Cart-Discount":"discount"};Object.keys(t).forEach((i=>{let s=e.get(i);s&&(this.cartController[t[i]]=s)}))}},$=class extends o{static targets=["submit","price","alert","downloadLink"];validatePrice(){let e=parseFloat(this.element.dataset.minPrice,10),t=parseFloat(this.priceTarget.value,10),i=t<=0,s=!0;return e>0&&(t<e||Number.isNaN(t)?(s=!1,this.submitTarget.disabled=!0,this.alertTarget.classList.remove("hide")):(this.submitTarget.disabled="true"===this.submitTarget.dataset.disabled,this.alertTarget.classList.add("hide"))),this.element.querySelector('[data-cart--price-target="downloadLink"]')&&(this.downloadLinkTarget.classList.toggle("hide",!i),this.submitTarget.parentNode.classList.toggle("hide",i)),s}onSubmit(e){this.validatePrice()||(e.preventDefault(),e.stopImmediatePropagation())}},M=class extends o{static targets=["button"];connect(){this.handleIsInCart()}get itemId(){return parseInt(this.data.get("id"),10)}get itemType(){return this.data.get("type")}handleIsInCart(){if(this.element.classList.contains(".with-quantity")||!this.cartBadgeController)return;let e=this.cartBadgeController.isItemInCart(this.itemId,this.itemType);this.element.classList.toggle("in-cart",e),this.element.classList.toggle("not-in-cart",!e),this.buttonTargets.forEach((t=>{t.classList.toggle("in-cart",e)}))}get cartBadgeController(){let e=document.getElementById("cart-badge"),t=null;return e&&(t=this.application.getControllerForElementAndIdentifier(e,"cart--badge")),t}onCartUpdate(){this.handleIsInCart()}openCart(){this.cartBadgeController&&this.cartBadgeController.displayCart()}},It=100,Dt=1400,Pt=20,Nt=Array.from({length:(Dt-It)/Pt+1},((e,t)=>It+Pt*t)),D=class extends o{connect(){yt(this)}resize({width:e}){let t=Nt.map((t=>`${t<e?">":"<"}${t}`)).join(" ");this.element.setAttribute(this.attributeName,t),"usersite-container"===this.element.id&&document.querySelector("html").setAttribute(this.attributeName,t),this.dispatch("updated",{detail:{width:e}})}get attributeName(){let e="content";return this.data.has("name")&&(e=this.data.get("name")),`${e}-width`}},N=class extends wt{},At="s-gigsalad-quote",q=class extends o{connect(){this.element.dataset.gsPath&&this.loadGigSalad((()=>{let e=new GsContactForm;e.initialize({path:this.element.dataset.gsPath,textColor:v("p"),linkColor:v("a"),backgroundColor:"transparent"}),e.display()}))}loadGigSalad(e){if(document.getElementById(At))typeof GsContactForm<"u"?e():setTimeout(e,10);else{let t=document.createElement("script");t.id=At,t.src="https://www.gigsalad.com/js/quote_widget.min.js",t.onload=e;let i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}}},Ot="s-gigsalad-review",B=class extends o{connect(){this.element.dataset.gsPath&&this.loadGigSalad((()=>{new GsReviewsWidget({path:this.element.dataset.gsPath,count:parseInt(this.element.dataset.gsCount,10),textColor:v("p"),linkColor:v("a"),backgroundColor:"transparent"}).display()}))}loadGigSalad(e){if(document.getElementById(Ot))typeof GsReviewsWidget<"u"?e():setTimeout(e,10);else{let t=document.createElement("script");t.id=Ot,t.src="https://www.gigsalad.com/js/gigsalad-reviews-widget.min.js",t.onload=e;let i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}}},U=class extends o{connect(){u()||void 0===this.element.dataset.id||this.ping()}},R=class extends o{connect(){this.defaultPathname=this.element.pathname,this.refresh()}refresh(){this.element.pathname="/"===window.location.pathname?"/":this.defaultPathname;let e=URL.parse(this.element.href);this.element.setAttribute("href",`${e.pathname}${e.hash}`)}},z=class extends o{onTextContainerClick(e){(this.isCollageDisplayFormat||this.isTextOnImageDisplayFormat)&&this.imageLinkElement&&this._clickOnImageLinkIfNeeded(e.target)}_clickOnImageLinkIfNeeded(e){e.closest(".text-container-wrapper")||this.imageLinkElement.click()}get isCollageDisplayFormat(){return this.element.classList.contains("display-format-collage")}get isTextOnImageDisplayFormat(){return this.element.classList.contains("display-format-text_on_image")}get imageLinkElement(){return this.element.querySelector(".image-container a")}},F=class extends o{static targets=["addToCartButton"];connect(){this.refresh()}refresh(){if("true"!==this.element.dataset.trackInventory)return;let e=this.element.dataset,t=null,i=!1;if(e.variations&&e.variations.length>0){let{variations:i}=e,s=this.element.querySelector("[name='cart_item[option_1_value]']"),r=this.element.querySelector("[name='cart_item[option_2_value]']"),a=s?s.value:null,o=r?r.value:null;if(t=JSON.parse(i).find((e=>e.value_1===a&&(null===e.value_2||e.value_2===o))),void 0===t)return}else t=e;t.inventory<=0?(this.hasAddToCartButtonTarget&&(this.addToCartButtonTarget.disabled="disabled"),i=!0):!this.element.classList.contains("not-available")&&this.hasAddToCartButtonTarget&&this.addToCartButtonTarget.removeAttribute("disabled"),this.element.classList.toggle("out-of-stock",i),this.element.classList.toggle("in-stock",!i)}handleSubmit(e){return!this.element.classList.contains("out-of-stock")||(e.stopImmediatePropagation(),e.preventDefault(),!1)}},j=class extends o{connect(){let{liveAt:e}=this.element.dataset,{liveUntil:t}=this.element.dataset,{liveText:i}=this.element.dataset,s=(new Date).getTime();s>=e&&s<=t&&(this.element.innerHTML=i)}},H=class extends o{cookieName="bypass_maintenance_mode";connect(){ht.get(this.cookieName)||ht.set(this.cookieName,!0)}},W=class extends o{static targets=["warning","price","submit"];get userValue(){return parseFloat(this.priceTarget.value,10)}check(){return this.isValid()?(this.warningTarget.classList.add("hide"),!0):(this.warningTarget.classList.remove("hide"),!1)}submit(e){let t=new URL(this.submitTarget.href),{userValue:i}=this;this.isValid()?(Number.isNaN(i)||t.searchParams.set("amount",i),this.submitTarget.href=t):e.preventDefault()}isValid(){let{userValue:e}=this,t=parseFloat(this.priceTarget.dataset.minPrice,10);return""===this.priceTarget.value||Number.isNaN(e)||e>=t}},G=class extends o{update(e){gt.morph(this.element,e.detail.html)}},J=class extends o{connect(){this.updateLinksToNoPjax(),document.addEventListener("pageLoad",this.updateLinksToNoPjax.bind(this))}disconnect(){document.removeEventListener("pageLoad",this.updateLinksToNoPjax)}updateLinksToNoPjax(){u()||this.validPage()&&document.querySelectorAll("#usersite-container a").forEach((e=>{e.classList.add("no-pjax")}))}validPage(){return document.querySelector(".chromeless-page")||document.querySelector(".website-page-single-feature")&&!document.querySelector("#page-root .post-single")}},Y=class extends o{connect(){if(u()||document.querySelector("view-site-bar"))return;let e=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;!0===e||"1"===e||_("click","a:not(.dnt)",(e=>{let t;t="A"===e.target.nodeName?e.target:e.target.closest("a");let i=t.href;this.isValidUrl(i)&&this.sendToGA(i,!t.target.includes("blank"))}))}sendToGA(e,t){window.gtag("event","click",{event_category:"outbound",event_label:e,transport_type:"beacon",event_callback(){t&&(document.location=e)}})}isValidUrl(e){if(!e)return!1;let t=new URL(e);return!(t.host===window.location.host||!t.protocol.includes("http"))}},X=class extends St{},Z=class extends o{SELECTED_CLASS="selected";connect(){this.mark()}mark(){let e=window.location.pathname;this.element.querySelectorAll("li").forEach((e=>{e.classList.remove(this.SELECTED_CLASS)}));let t=this.element.querySelector(`a[href="${e}"]`);if(!t)return;let i=t.closest("li.top");i&&i.classList.add(this.SELECTED_CLASS);let s=t.closest("li.subpage");s&&s.classList.add(this.SELECTED_CLASS)}},Q=class extends kt{},K=class extends o{INTERSECTION_CLASS=".store-wrapper article:last-child";OBSERVED_CLASS="store-wrapper-observed";OBSERVER_CONFIG={rootMargin:"100px 0px 0px 0px",threshold:0};connect(){this.wrapper=this.element.closest(".feature"),this.featureId=this.wrapper.dataset.featureId,this.setupDeferredPagination()}disconnect(){this.observer&&this.observer.disconnect&&this.observer.disconnect()}setupDeferredPagination(){let{loadMore:e}=this.wrapper.querySelector(".store-wrapper").dataset;if(!0!==e&&"true"!==e)return;if(typeof IntersectionObserver>"u"||!0===IntersectionObserver.polyfill)return void this.loadMore(!0);let t=this.element.querySelectorAll(`${this.INTERSECTION_CLASS}:not(.${this.OBSERVED_CLASS})`);this.observer=new IntersectionObserver((e=>this.onIntersection(e)),this.OBSERVER_CONFIG);for(let e=0;e<t.length;e+=1)t[e].classList.add(this.OBSERVED_CLASS),this.observer.observe(t[e])}onIntersection(e){for(let t=0;t<e.length;t+=1){let i=e[t];i.isIntersecting&&(this.observer.unobserve(i.target),i.target.classList.remove(this.OBSERVED_CLASS),this.loadMore())}}loadMore(e){let{loadMore:t,storeId:i,offset:s}=this.element.dataset;if(void 0===t)return;let r=`/go/stores/${i}/store_items?offset=${s}`;void 0!==this.featureId&&(r=`${r}&store_feature_id=${this.featureId}`);let a=this.element;if(!0!==t&&"true"!==t)return;!0===e&&(r+="&amount=1000");let o=new XMLHttpRequest,n=this;o.open("GET",r,!0),o.onload=()=>{if(o.status>=200&&o.status<400){let e=o.responseText,t=C(e);a.dataset.offset=t.dataset.offset,a.dataset.loadMore=t.dataset.loadMore;let i=a.querySelectorAll("article.empty");Array.prototype.forEach.call(i,(e=>{e.parentNode.removeChild(e)}));let s=t.querySelectorAll("article");for(let e=0;e<s.length;e+=1)a.appendChild(s[e]);document.dispatchEvent(new CustomEvent("pageLoad")),n.setupDeferredPagination()}},o.send()}},tt=class extends o{static targets=["content"];CLOSED_CLASS="-is-closed";connect(){this.isMobile()?this.close():this.open()}isClosed(){return this.element.classList.contains(this.CLOSED_CLASS)}open(){if(!this.hasContentTarget)return;this.element.classList.remove(this.CLOSED_CLASS);let e=this.contentTarget,t=e.scrollHeight;e.style.height=`${t}px`,e.addEventListener("transitioned",(()=>{e.removeEventListener("transitioned",this.open),e.style.height=null}))}close(){if(!this.hasContentTarget)return;this.element.classList.add(this.CLOSED_CLASS);let e=this.contentTarget,t=e.scrollHeight;requestAnimationFrame((()=>{e.style.height=`${t}px`,requestAnimationFrame((()=>{e.style.height="0px"}))}))}isMobile(){return document.getElementById("usersite-container").classList.contains("mobile-view")}toggle(){this.isClosed()?this.open():this.close()}toggleDesktop(){this.isMobile()||this.open()}},et=class extends o{static targets=["addToCartButton","descriptionWrapper","formWrapper"];setInCart(){this.toggleForm()}toggleForm(){this.descriptionWrapperTarget.classList.toggle("hide"),this.formWrapperTarget.classList.toggle("hide")}},rt=class extends o{static targets=["expandLink","fullVersion","truncatedVersion"];connect(){this.hasTruncatedVersionTarget&&(this.truncated=this.truncationEnabled)}get truncationEnabled(){return!("true"===this.data.get("skipForPdf")&&document.body.classList.contains("pdf"))}set truncated(e){this.truncatedVersionTarget.classList.toggle("hide",!e),this.fullVersionTarget.classList.toggle("hide",e),this.hasExpandLinkTarget&&this.expandLinkTarget.classList.toggle("hide",!e)}expand(e){e.preventDefault(),this.truncated=!1}},it=class extends _t{},ot=class extends m{static targets=["checkbox","optionSelect1","optionSelect2","priceWrapper","variationsSection"];connect(){super.connect(),Promise.resolve().then((()=>{this.updatePriceLabel(),this.updateVariationsSection()}))}toggle(){this.updatePriceLabel(),this.updateVariationsSection(),this.productsController.productToggled()}optionChanged(){Promise.resolve().then((()=>{this.updatePriceLabel(),this.productsController.productOptionChanged()}))}updatePriceLabel(){if(this.hasPriceWrapperTarget&&this.showVariationPrice){let e="";if(this.checked)e=this.variationAvailable(this.selectedVariationData)?b(this.price,this.currencyUnit,this.currencyPrecision):window.I18n.t("usersite.products.status.out_of_stock");else{let t=Math.min(...this.availableVariationPrices),i=Math.max(...this.availableVariationPrices);e=b(t,this.currencyUnit,this.currencyPrecision),t!==i&&(e=`${e} - ${b(i,this.currencyUnit,this.currencyPrecision)}`)}this.priceWrapperTarget.innerHTML=e}}updateVariationsSection(){this.hasVariationsSectionTarget&&this.variationsSectionTarget.classList.toggle("hide",!this.checked)}get price(){if(!this.available)return 0;let e=this.selectedVariationData,t=e&&this.showVariationPrice?e.price:this.data.get("price");return parseFloat(t)}get checked(){return this.checkboxTarget.checked}get currencyUnit(){return this.productsController.currencyUnit}get currencyPrecision(){return this.productsController.currencyPrecision}get available(){return!this.trackInventory||(this.selectedVariationData?this.variationAvailable(this.selectedVariationData):JSON.parse(this.data.get("inventory"))>0)}get showVariationPrice(){return JSON.parse(this.data.get("showVariationPrice"))}get trackInventory(){return JSON.parse(this.data.get("trackInventory"))}get variationsData(){return"variations"in this.element.dataset?(this._variationsData||=JSON.parse(this.element.dataset.variations),this._variationsData):[]}get availableVariationPrices(){return this.variationsData.flatMap((e=>this.variationAvailable(e)?[e.price]:[]))}get selectedVariationData(){let e=[this.hasOptionSelect1Target?this.optionSelect1Target.value:void 0,this.hasOptionSelect2Target?this.optionSelect2Target.value:void 0];return this.variationDataFor(...e)}variationDataFor(e,t){return this.variationsData.find((i=>i.value_1===e&&(!("value_2"in i)||null===i.value_2||i.value_2===t)))}variationAvailable(e){return e&&0!==e.inventory}get productsController(){return this._conductorController}},at=class extends m{static targets=["itemsTotal","itemsTotalValue","image","addButton"];connect(){super.connect(),Promise.resolve().then((()=>this.update()))}productToggled(){this.update()}productOptionChanged(){this.update()}update(){this.updateTotal(),this.highlightImages()}updateTotal(){let e=0===this.checkedAvailableProducts.length;this.itemsTotalValueTarget.innerHTML=e?window.I18n.t("usersite.store_features.upsell_products.no_items_selected"):`${window.I18n.t("global.purchases.labels.total")} ${b(this.totalPrice,this.currencyUnit,this.currencyPrecision)}`,this.addButtonTarget.disabled=e}highlightImages(){this.products.forEach(((e,t)=>{this.imageTargets[t].classList.toggle("dimmed-image",!e.checked)}))}get totalPrice(){return this.checkedAvailableProducts.reduce(((e,t)=>e+t.price),0)}get currencyUnit(){return this.data.get("currencyUnit")}get currencyPrecision(){return this.data.get("currencyPrecision")}get checkedAvailableProducts(){return this.products.filter((e=>e.checked&&e.available))}get products(){return this._musicianControllers}},st=class extends o{static targets=["select1","select2"];connect(){this.refresh()}refresh(){if(!this.hasSelect1Target||!this.hasSelect2Target)return;Array.from(this.select1Target.options).forEach((e=>{e.disabled=!1})),Array.from(this.select2Target.options).forEach((e=>{e.disabled=!1}));let e=this.select1Target.value,t=JSON.parse(this.element.dataset.variations),i=[];if(t.forEach((t=>{t.value_1===e&&(!this.trackInventory||t.inventory>0)&&i.push(t.value_2)})),Array.from(this.select2Target.options).forEach((e=>{i.includes(e.value)||(e.disabled=!0)})),!0===this.select2Target.selectedOptions[0].disabled){let e=Array.from(this.select2Target.options).find((e=>!1===e.disabled));this.select2Target.selectedIndex=e?e.index:0,this.element.dispatchEvent(new CustomEvent("refreshInventoryForm")),this.element.dispatchEvent(new CustomEvent("refreshVariationPrice"))}}get trackInventory(){return this.data.has("trackInventory")?JSON.parse(this.data.get("trackInventory")):"trackInventory"in this.element.dataset&&JSON.parse(this.element.dataset.trackInventory)}},nt=class extends o{static targets=["addToCartButton"];refresh(){if(this.addToCartButtonTarget.classList.contains("subscriber-price")||this.addToCartButtonTarget.classList.contains("sale-price"))return;let e=[];this.element.querySelectorAll(".item-option-select select").forEach((t=>{e.push(t.value)}));let t=null,i=JSON.parse(this.element.dataset.variations);t=1===e.length?i.find((t=>t.value_1===e[0])):i.find((t=>t.value_1===e[0]&&t.value_2===e[1])),t&&(this.addToCartButtonTarget.innerHTML=this.addToCartButtonTarget.innerHTML.replace(this.addToCartButtonTarget.innerHTML.match(/: (.*)/)[1],t.formatted_price))}},lt=class extends o{static targets=["hint"];connect(){let e=[];JSON.parse(this.element.dataset.variations).forEach((t=>{e.push([t.formatted_price,parseFloat(t.price)])}));let t=e[0],i=e[0];if(e.forEach((e=>{e[1]<t[1]&&(t=e),e[1]>i[1]&&(i=e)})),t[1]===i[1])return;let s=this.hintTarget.innerHTML,r=`${t[0]} - ${i[0]}`;-1===s.indexOf(r)&&(this.hintTarget.innerHTML=`${s} ${r}`,this.hintTarget.classList.remove("hide"))}},ct=class extends o{static targets=["image"];async connect(){let e=this.data.get("id");switch(this.data.get("type")){case"youtube":this.src=`//img.youtube.com/vi/${e}/0.jpg`;break;case"vimeo":fetch(`http://vimeo.com/api/v2/video/${e}.json`).then((e=>e.json())).then((e=>{this.src=e[0].thumbnail_large})).catch((()=>{this.visible=!1}));break;default:this.visible=!1}}set visible(e){this.element.classList.toggle("pdf__hide",!e)}set url(e){this.element.setAttribute("href",e)}set src(e){this.imageTarget.setAttribute("src",e)}},dt=class extends Ct{},mt=class extends o{VIMEO_SELECTOR='iframe[src*="player.vimeo.com"]';YOUTUBE_SELECTOR='iframe[src*="youtube.com/embed"]';VIDEO_SELECTORS='iframe[src*="player.vimeo.com"],iframe[src*="youtube.com/embed"]';HANDLED_CLASS="zoogle-handled";connect(){this.element.querySelector(this.VIDEO_SELECTORS)&&(S(),this.element.querySelector(this.VIMEO_SELECTOR)&&this.setupVimeoVideos(),this.element.querySelector(this.YOUTUBE_SELECTOR)&&this.setupYoutubeVideos(),this.wrapUnwrappedVideos())}disconnect(){this.unregisterYoutubePlayers(),this.unregisterVimeoPlayers()}setupVimeoVideos(){this.element.querySelectorAll(this.VIMEO_SELECTOR).forEach((e=>{if(!e.id){let t=0,i=`vimeo${t}`;for(;document.getElementById(i);)t+=1,i=`vimeo${t}`;e.id=i}e.classList.add(this.HANDLED_CLASS),this.registerVimeoPlayerWithZoogleMedia(e)}))}handleVimeoPostMessage(e){if(void 0===e.data||'{"event":"ready"}'===!e.data||'{"event":"play"}'===!e.data)return;let t;try{t=JSON.parse(e.data)}catch{t={}}if(t.player_id&&this.element.querySelector(`#${t.player_id}`))if("ready"===t.event){let e={method:"addEventListener",value:"play"};this.postToVimeo(t.player_id,e)}else"play"===t.event&&window.zoogleMedia.setActive(this.element.querySelector(`#${t.player_id}`))}postToVimeo(e,t){let i=this.element.querySelector(`#${e}`);if(!i)return;let s=i.src.split("?")[0];i.contentWindow.postMessage(JSON.stringify(t),s)}registerVimeoPlayerWithZoogleMedia(e){e.pause=()=>{let t={method:"pause"};this.postToVimeo(e.id,t)},window.zoogleMedia.register(e)}setupYoutubeVideos(){if(window.ytLoaded)this.registerYouTubeEvents();else{let e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";let t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),window.YT_ready((()=>{this.registerYouTubeEvents()}))}}registerYouTubeEvents(){let e=e=>{e.data===window.YT.PlayerState.PLAYING&&window.zoogleMedia.setActive(e.target)};this.element.querySelectorAll(`${this.YOUTUBE_SELECTOR}:not(.${this.HANDLED_CLASS})`).forEach((t=>{let i=t.src;if(!i.match(/enablejsapi=1/i))return;if(t.classList.add(this.HANDLED_CLASS),i.match("^http://")&&(t.src=i.replace(/^http:\/\//i,"https://")),!t.id){let e=0,i=`yt-${e}`;for(;document.getElementById(i);)e+=1,i=`yt-${e}`;t.id=i}let s=new window.YT.Player(t.id,{events:{onStateChange:e}});s.pause=()=>{s.pauseVideo&&s.pauseVideo()},s.classList=t.classList,window.zoogleMedia.register(s)}))}wrapUnwrappedVideos(){Tt(this.element.querySelectorAll(this.VIDEO_SELECTORS))}unregisterYoutubePlayers(){this.element.querySelectorAll(`${this.YOUTUBE_SELECTOR}.${this.HANDLED_CLASS}`).forEach((e=>{let t=window.zoogleMedia.players.findIndex((t=>t.a===e));window.zoogleMedia.players.remove(t),this.clearCurrentPlayer(e)}))}unregisterVimeoPlayers(){this.element.querySelectorAll(`${this.VIMEO_SELECTOR}.${this.HANDLED_CLASS}`).forEach((e=>{let t=window.zoogleMedia.players.indexOf(e);window.zoogleMedia.players.remove(t),this.clearCurrentPlayer(e)}))}clearCurrentPlayer(e){window.zoogleMedia.currentPlayer===e&&(window.zoogleMedia.currentPlayer=void 0)}},Vt=[{identifier:"airbit-feature",controllerConstructor:L},{identifier:"attributions",controllerConstructor:E},{identifier:"bundle-inventory-form",controllerConstructor:k},{identifier:"bundle-variations-options",controllerConstructor:I},{identifier:"cart--badge",controllerConstructor:P},{identifier:"cart--badge-loader",controllerConstructor:A},{identifier:"cart--cart",controllerConstructor:O},{identifier:"cart--item",controllerConstructor:V},{identifier:"cart--price",controllerConstructor:$},{identifier:"cart--salable-item",controllerConstructor:M},{identifier:"content-width",controllerConstructor:D},{identifier:"fb-video",controllerConstructor:N},{identifier:"gigsalad-quote",controllerConstructor:q},{identifier:"gigsalad-review",controllerConstructor:B},{identifier:"hit-counter-feature",controllerConstructor:U},{identifier:"home-link",controllerConstructor:R},{identifier:"image-and-text-feature",controllerConstructor:z},{identifier:"inventory-form",controllerConstructor:F},{identifier:"live-text",controllerConstructor:j},{identifier:"maintenance-mode-bypass",controllerConstructor:H},{identifier:"minimum-value",controllerConstructor:W},{identifier:"morphing-dom",controllerConstructor:G},{identifier:"no-pjax",controllerConstructor:J},{identifier:"outbound-links",controllerConstructor:Y},{identifier:"recaptcha",controllerConstructor:X},{identifier:"selected-page",controllerConstructor:Z},{identifier:"session",controllerConstructor:Q},{identifier:"store-features",controllerConstructor:K},{identifier:"subscriptions-dropdown",controllerConstructor:tt},{identifier:"tip-jar-feature",controllerConstructor:et},{identifier:"truncation",controllerConstructor:rt},{identifier:"twitch-parent",controllerConstructor:it},{identifier:"upsell-product",controllerConstructor:ot},{identifier:"upsell-products",controllerConstructor:at},{identifier:"variations-options",controllerConstructor:st},{identifier:"variations-price",controllerConstructor:nt},{identifier:"variations-range",controllerConstructor:lt},{identifier:"video-thumbnail",controllerConstructor:ct},{identifier:"zoogle-media-player",controllerConstructor:dt},{identifier:"zoogle-video",controllerConstructor:mt}],$t=Et();$t.load(Vt),$t.register("clipboard",xt),_("turbo:frame-render","html",(e=>{e.target.querySelectorAll("a,form").forEach((e=>{e.classList.add("no-pjax")}))}));var ut=class extends(Lt(ft)){static properties={closeFrameHref:{type:String,attribute:"close-frame-href-title"},closeFrameDataTemplate:{type:String,attribute:"close-frame-data-template"},isTrial:{type:Boolean,attribute:"is-trial"},accessPassword:{type:String,attribute:"access-password"},permalinksAllowed:{type:Boolean,attribute:"permalinks-allowed"},twitterShareUrl:{type:String,attribute:"twitter-share-url"},facebookShareUrl:{type:String,attribute:"facebook-share-url"},editSiteHref:{type:String,attribute:"edit-site-href"},editSiteGenericUrl:{type:String,attribute:"edit-site-generic-url"}};static styles=pt`
    :host {
      position: sticky;
      top: 0;
      z-index: var(--remix-container-z);
    }

    @media (max-width: 759px) {
      .level__center > .level__item {
        width: 50%;
        margin-left: auto !important;
        margin-right: auto !important;
      }
    }
  `;connectedCallback(){super.connectedCallback(),document.documentElement.classList.add("with-view-site-bar"),window.$(document).on("pjax:end",(()=>{let e=window.location.href.replace(/.*\/\/[^/]+\/([^/]+).*/,"$1");this.renderRoot.querySelectorAll(".main-action-link").forEach((t=>{t.href=window.decodeURI(t.dataset.template).replace("{{page}}",e)}))})),window.$.support.pjax&&window.history.replaceState("",document.title,this._cleanUrl())}disconnectedCallback(){document.documentElement.classList.remove("with-view-site-bar"),super.disconnectedCallback()}render(){return this.withRemix(g`
        <nav class="level -pl-1x -pr-1x -pb-1x -mt-0x -with-center -mobile">
          <div class="level__left">
            <div class="level__item">
              <a class="button main-action-link -icon-only-on-mobile -simple-only-on-mobile" href=${this.closeFrameHref} data-template="${this.closeFrameDataTemplate}" target="_top">
                <remix-icon name="close" class="button__icon"></remix-icon>
                <span>Close frame</span>
              </a>
            </div>
          </div>

          ${this._centerContent}

          <div class="level__right">
            <div class="level__item">
              <div class="buttons -attached visibility -not-mobile">
                <a id="desktop-view" class="button -icon-only view-toggle -is-active" @click="${this._toggleViewMode}">
                  <remix-icon name="device-desktop" class="button__icon"></remix-icon>
                </a>
                <a id="mobile-view" class="button -icon-only view-toggle" @click="${this._toggleViewMode}">
                  <remix-icon name="device-mobile" class="button__icon"></remix-icon>
                </a>
              </div>
            </div>
            <div class="level__item">
              <a class="button main-action-link -text-only-on-mobile" href=${this.editSiteHref} data-template="${this.editSiteGenericUrl}" target="_top">
                <remix-icon name="edit" class="button__icon"></remix-icon>
                <span>Edit site</span>
              </a>
            </div>
          </div>
        </nav>
      `,{dark:!0,transparent:!1})}get _centerContent(){let e,t;return this.isTrial&&this.accessPassword?e=g`
        <span class="visibility -desktop-only">Visitors can preview your site by using this password: <b>${this.accessPassword}</b></span>
        <span class="visibility -not-desktop">Preview password for visitors: <b>${this.accessPassword}</b></span>
      `:this.permalinksAllowed&&(e=g`
        <p class="-ml-0-5x -mr-0-5x -mt-1x -mb-0x visibility -not-mobile">Share your site with the world.</p>
        <a class="button -ml-0-5x -mr-0-5x -icon-only visibility -not-mobile" href=${this.twitterShareUrl} data-width=685 data-height=246 @click="${this._openPopup}">
          <remix-icon name="twitter" class="button__icon"></remix-icon>
        </a>
        <a class="button -ml-0-5x -mr-0-5x -icon-only visibility -not-mobile" href=${this.facebookShareUrl} data-width=550 data-height=357 @click="${this._openPopup}">
          <remix-icon name="facebook" class="button__icon"></remix-icon>
        </a>
      `),this.isTrial||(t=g`<p class="visibility -mobile-only -mb-0x -mt-0x">Preview mode</p>`),g`
      <div class="level__center">
        <div class="level__item">
          ${t}
          ${e}
        </div>
      </div>
    `}_openPopup(e){window.open(e.target.href,"popup",`width=${e.target.dataset.width},height=${e.target.dataset.height}`),e.preventDefault()}_toggleViewMode(e){this.renderRoot.querySelectorAll(".view-toggle").forEach((e=>{e.classList.remove("-is-active")}));let t=e.target;t.classList.add("-is-active");let i="mobile-view"===t.id;if(document.documentElement.classList.toggle("mobile-preview",i),i){window.zoogleMedia&&window.zoogleMedia.pause();let e=this._cleanUrl();e=e+(e.match(/\?/)?"&":"?")+Math.floor(1e5*Math.random()),window.$.featherlight({html:`<div class="scroll-to-top">Scroll to top</div><iframe class="mobile-preview" name="mobile_preview" src="${e}"/>`,variant:"mobile-preview",closeOnClick:!1,afterClose:this._onMobilePreviewClosed}),this.scrollToTopLink.addEventListener("click",this._simulateScrollToTop)}else this.scrollToTopLink.addEventListener("click",this._simulateScrollToTop),window.$.featherlight.close()}_cleanUrl(){return window.location.href.replace(/&?(cp_return_url|preview_from_cp|hash|t)=([^&]+)/g,"").replace("?&","?").replace(/\?$/,"").replace(/#.*/,"")}get scrollToTopLink(){return document.querySelector(".scroll-to-top")}_simulateScrollToTop(){window.frames.mobile_preview.scrollTo({top:0,behavior:"smooth"})}_onMobilePreviewClosed(){document.querySelectorAll(".view-toggle").forEach((e=>{e.classList.remove("-is-active"),"desktop-view"===e.id&&e.classList.add("-is-active")}))}};customElements.define("view-site-bar",ut),typeof window.zoogle>"u"&&(window.zoogle={}),typeof window.zoogle.setUrlParam>"u"&&(window.zoogle.setUrlParam=(e,t)=>{let i=new URL(window.location.href);i.searchParams.set(e,t),window.history.replaceState(null,null,i)}),typeof window.zoogle.removeUrlParam>"u"&&(window.zoogle.removeUrlParam=e=>{let t=new URL(window.location.href);t.searchParams.delete(e),window.history.replaceState(null,null,t)});