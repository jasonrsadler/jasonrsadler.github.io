/**! @license Third-party licenses available at bandzoogle.com/licenses */
import{a as r}from"/scripts/chunks/chunk-4PD7QEWJ.digested.js";import{a as d}from"/scripts/chunks/chunk-HQGF43QM.digested.js";import{a}from"/scripts/chunks/chunk-ED4DOYUA.digested.js";import{d as c}from"/scripts/chunks/chunk-TPOPGTYZ.digested.js";a("click",".toggle-edit",(t=>{let e=t.currentTarget.dataset.toggleHide,a=t.currentTarget.dataset.toggleShow,i=0;t.preventDefault();let s=document.querySelectorAll(e);for(i=0;i<s.length;i+=1)s[i].classList.add("hide","visibility","-hidden");for(s=document.querySelectorAll(a),i=0;i<s.length;i+=1)s[i].classList.remove("hide","-hidden")})),a("click",".toggle-expanded",(t=>{let e=t.currentTarget.dataset.target,a=t.currentTarget.dataset.class,i=0;t.preventDefault();let s=document.querySelectorAll(e);for(i=0;i<s.length;i+=1)s[i].classList.toggle(a)}));var l=class{constructor(){let t=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;this.dontTrack=!0===t||"1"===t,this.dropStats=r()||this.dontTrack,this.dropStats?this.eventHandlers={click:this.#t.bind(this),play:this.#t.bind(this),skip:this.#t.bind(this),event:this.#t.bind(this)}:this.eventHandlers={click:this.#e.bind(this),play:this.#a.bind(this),skip:this.#i.bind(this),event:this.#s.bind(this)}}get pageId(){let t=document.querySelectorAll("[data-page-id]")[0];if(t)return t.dataset.pageId}trackPageView(){this.dropStats||void 0===this.pageId||this.pageId===this.lastPageId||(this.lastPageId=this.pageId,typeof window.gtag<"u"&&window.gtag("config",window.GA_TRACKING_CODE,{anonymize_ip:!0,page_path:window.location.pathname}),this.trackZoogle(["_trackPage",this.pageId]))}handleEvent(t,e){let a=this.eventHandlers[t.toLowerCase()];a&&a(e)}trackGA(t,e){typeof window.gtag<"u"&&(typeof e>"u"&&(e={}),window.gtag("event",t,e))}trackZoogle(t){window._zaq&&window._zaq.push(t)}#t(){}#e(t){this.trackGA(t.statAction,{event_category:t.category,event_label:t.title.toString()}),this.trackZoogle(["_track",t.id,t.category,t.statAction])}#a(t){this.trackGA(t.type,{event_category:"Tracks",event_label:t.title.toString()}),this.trackZoogle(["_track",t.id,"Track",t.type])}#i(t){let e=0;if("Plays"===t.type&&t.position>0){e=t.position/t.duration;let a=e<.1;this.trackGA(a?"Skips":"Partial",{event_category:"Tracks",event_label:t.title.toString()}),this.trackZoogle(["_track",t.id,"Track",a?"Skip":"Partial"])}}#s(t){this.trackGA(t.action,{event_category:t.event_category,event_label:t.event_label})}},s=new l;a("click","[data-stat-action]",(t=>{let e=t.currentTarget.dataset;e.title||(e.title=t.currentTarget.href),s.handleEvent("click",e)})),a("tracking:event","body",(t=>{let e=t.detail.type,{params:a}=t.detail;s.handleEvent(e,a)})),a("tracking:ga","body",(t=>{let e=t.detail.type,{params:a}=t.detail;s.trackGA&&s.trackGA(e,a)})),document.addEventListener("pageLoad",(()=>{s.trackPageView()}));var g=[".topic_comment_name",".topic_location_name",".unless-logged-in input"],h=class extends d{initialize(){this.userData=void 0}connect(){r()}removeElements(t){document.querySelectorAll(t).forEach((t=>{t.parentNode.removeChild(t)}))}apply(){if(!this.userData||!1===this.userData.success)return document.querySelector("html").classList.remove("logged-in"),void document.querySelector("html").classList.add("not-logged-in");(typeof this.userData.name>"u"||""===this.userData.name||null===this.userData.name)&&(this.userData.name=""),document.querySelector("html").classList.add("logged-in"),document.querySelector("html").classList.remove("not-logged-in"),document.querySelectorAll("span.username").forEach((t=>{t.innerText=this.userData.name})),g.forEach((t=>this.removeElements(t)))}};export{h as a};