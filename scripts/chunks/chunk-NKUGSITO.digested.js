/**! @license Third-party licenses available at bandzoogle.com/licenses */
import{a as i}from"/scripts/chunks/chunk-4PD7QEWJ.digested.js";import{b as n}from"/scripts/chunks/chunk-YX7F2HNK.digested.js";var s=".grecaptcha-badge";window.captchaIsLoading=!1;var r=class extends n{$=document.querySelector.bind(this.element);$$=(e,t=this.element)=>[...t.querySelectorAll(e)];connect(){if(i())return;this.loadCaptchaJS(this.element,this),this.element.addEventListener("focusin",(()=>{this.toggleBadge(!0)})),this.element.addEventListener("focusout",(()=>{this.toggleBadge(!1)}));let e=this.scoreBeforeSubmit.bind(this);this.$$("button,input[type=submit]").forEach((t=>{t.addEventListener("click",e)}))}get captchaIsLoaded(){return typeof grecaptcha<"u"&&void 0!==grecaptcha.render}toggleBadge(e){let t=document.querySelector(s);t&&(e?t.classList.add("active"):t.classList.remove("active"))}loadCaptchaJS(e,t){if(!window.onCaptchaLoaded){let e=function(){document.querySelectorAll("[data-controller=recaptcha]").forEach((e=>{e.dataset.widgetId||(e.dataset.widgetId=grecaptcha.render(e.querySelector(".g-recaptcha")))}))};window.onCaptchaLoaded=e.bind(this)}if(t.captchaIsLoaded)return void window.onCaptchaLoaded();if(window.captchaIsLoading)return void setTimeout((()=>this.loadCaptchaJS(e,t)),500);window.captchaIsLoading=!0;let a=document.createElement("script");a.type="text/javascript",a.async=!0,a.id="recaptcha-js",a.src="https://www.google.com/recaptcha/api.js?render=explicit&onload=onCaptchaLoaded";let c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c)}onDone(e){let t=e.target.querySelector('[type="submit"]');t?t.click():this.element.submit()}scoreBeforeSubmit(e){if(this.data.get("didRun"))return!0;if(!grecaptcha)return console.log("no recaptcha, lets jet"),!0;this.data.set("didRun",!0),e.preventDefault(),e.stopImmediatePropagation();let t=`${this.element.dataset.widgetId}`;return grecaptcha.execute(t).then((()=>{}),(e=>{console.log(e)})),!1}};export{r as a};